{"version":3,"file":"static/js/174.37156fd0.chunk.js","mappings":"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","sources":["webpack://react-samurai-way/./src/pages/PeoplePage/PeoplePage.module.scss?a8dc","pages/PeoplePage/PeoplePage.tsx","pages/PeoplePage/PeoplePageContainer.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"usersIFollowSection\":\"PeoplePage_usersIFollowSection__J-2O9\",\"usersSection\":\"PeoplePage_usersSection__b6PEL\",\"searchInput\":\"PeoplePage_searchInput__x+D6h\",\"usersList\":\"PeoplePage_usersList__VSso0\",\"usersNav\":\"PeoplePage_usersNav__D4dSu\",\"usersNavItem\":\"PeoplePage_usersNavItem__L+8kB\",\"active\":\"PeoplePage_active__v8x+u\"};","import React, { useEffect, useRef } from 'react'\nimport { NavLink, Outlet } from 'react-router-dom'\nimport MyButton from '../../components/common/MyButton/MyButton'\nimport Preloader from '../../components/common/Preloader/Preloader'\nimport TabsRowBlock from '../../components/TabsRowBlock/TabsRowBlock'\nimport { getPagesAmount, isActiveNavLink } from '../../helpers/helpers'\nimport { IUser } from '../../redux/users/types'\nimport cl from './PeoplePage.module.scss'\n\n/* ------------- Types ------------- */\ninterface PeoplePageProps {\n  usersList: IUser[]\n  totalUsersCount: number\n  currentPage: number\n  maxPageItemsCount: number\n  searchInput: string\n  pathName: string\n  isUsersFetching: boolean\n  isSubscribePending: number[]\n  navigate: (link: string) => void\n  setSearchInput: (searchInput: string) => void\n  toggleFollowOnUser: (userId: number, followed: boolean) => void\n  setCurrentPage: (page: number) => void\n  createDialogThunk: (userId: number) => void\n}\n\nexport interface PeoplePageOutletContext {\n  usersList: IUser[]\n  isSubscribePending: number[]\n  toggleFollowOnUser: (userId: number, followed: boolean) => void\n  createDialogThunk: (userId: number) => void\n}\n\n/* ------------- Component ------------- */\nconst PeoplePage: React.FC<PeoplePageProps> = ({\n  totalUsersCount,\n  currentPage,\n  maxPageItemsCount,\n  usersList,\n  searchInput,\n  navigate,\n  pathName,\n  isUsersFetching,\n  isSubscribePending,\n  toggleFollowOnUser,\n  setCurrentPage,\n  setSearchInput,\n  createDialogThunk,\n}) => {\n  const observedElement = useRef<HTMLDivElement>(null)\n  const observer = useRef<IntersectionObserver | null>(null)\n  const path = useRef(pathName)\n\n  useEffect(() => {\n    if (isUsersFetching) return\n    if (observer.current) {\n      observer.current.disconnect()\n    }\n    const callBack = (entries: IntersectionObserverEntry[]): void => {\n      if (\n        entries[0].isIntersecting &&\n        currentPage < getPagesAmount(totalUsersCount, maxPageItemsCount) &&\n        path.current === pathName\n      ) {\n        setCurrentPage(currentPage + 1)\n      }\n      path.current = pathName\n    }\n    observer.current = new IntersectionObserver(callBack)\n    observer.current.observe(observedElement.current!)\n  }, [isUsersFetching, pathName])\n\n  const handleSearchInputChange = (e: React.ChangeEvent<HTMLInputElement>) =>\n    setSearchInput(e.target.value)\n\n  return (\n    <section className={cl.usersIFollowSection}>\n      <section className={cl.usersSection}>\n        <TabsRowBlock \n          firstTabName={'All developers '} \n          secondTabName={'Friends'} \n          totalCount={totalUsersCount} \n          callBack={() => navigate('/people')} \n        />\n        <input\n          placeholder={'Search users I follow'}\n          className={cl.searchInput}\n          type=\"text\"\n          value={searchInput}\n          onChange={handleSearchInputChange}\n        />\n        <div className={cl.usersList}>\n          <Outlet //UsersList\n            context={{\n              usersList,\n              isSubscribePending,\n              toggleFollowOnUser,\n              createDialogThunk,\n            }} \n          />\n        </div>\n        {isUsersFetching ? (<Preloader width=\"50px\" height=\"50px\" position=\"absolute\" />) : (<div ref={observedElement} />)}\n      </section>\n      <PeopleNav />\n    </section>\n  )\n}\n\nexport default PeoplePage\n\n/* ------------- Nested components ------------- */\nconst PeopleNav = () => {\n  return (\n    <nav className={cl.usersNav}>\n      <NavLink to=\"friends\" className={isActiveNavLink(cl.usersNavItem, cl.active)} >People I follow</NavLink>\n      <NavLink to=\"/people\" end className={isActiveNavLink(cl.usersNavItem, cl.active)} >Find Developers</NavLink>\n      <div className={cl.usersNavItem}>Placeholder</div>\n      <div className={cl.usersNavItem}>Placeholder</div>\n      <div className={cl.usersNavItem}>Placeholder</div>\n    </nav>\n  )\n}\n","import React, { useEffect, useRef, useState } from 'react'\nimport { RootState } from '../../redux/store'\nimport { fetchUsersThunk } from '../../redux/users/thunks'\nimport { clearUsersState } from '../../redux/users/actions';\nimport { connect, ConnectedProps } from 'react-redux';\nimport { compose } from 'redux';\nimport { setCurrentUsersPage } from '../../redux/users/actions';\nimport { toggleFollowOnUserThunk } from '../../redux/users/thunks';\nimport PeoplePage from './PeoplePage';\nimport { RouteType, withRoute } from '../../components/hoc/withRoute';\nimport { ErrorPopUp } from '../../components/common/ErrorPopUp/ErrorPopUp';\nimport { createDialogThunk } from '../../redux/messenger/thunks';\n\n/* ------------- Component ------------- */\nconst PeoplePageContainerApi: React.FC<PeoplePageContainerProps & RouteType> = ({\n  route,\n  usersList,\n  currentPage,\n  totalUsersCount,\n  // maxPageItemsCount,\n  isSubscribePending,\n  isUsersFetching,\n  fetchUsersError,\n  toggleFollowOnUserError,\n  clearUsersState,\n  setCurrentUsersPage,\n  fetchUsersThunk,\n  toggleFollowOnUserThunk,\n  createDialogThunk\n}) => {\n  const {location: {pathname: pathName}, navigate} = route\n  const [searchInput, setSearchInput] = useState('')\n  const memorizedPath = useRef(pathName)\n  const maxPageItemsCount = 15\n\n  useEffect(() => {\n    return () => {\n      clearUsersState()\n    }\n  }, [clearUsersState])\n\n  useEffect(() => {\n    clearUsersState()\n    window.scrollTo(0, 0)\n  }, [searchInput])\n\n  useEffect(() => {\n    clearUsersState()\n  }, [pathName])\n\n  useEffect(() => {\n    if(memorizedPath.current !== pathName && currentPage > 1) {\n      memorizedPath.current = pathName\n      return \n    }\n\n    if(isUsersFetching) return\n\n    memorizedPath.current = pathName\n\n    switch (pathName) {\n      case '/people':\n        fetchUsersThunk(currentPage, maxPageItemsCount, searchInput)\n        return\n      case '/people/friends':\n        fetchUsersThunk(currentPage, maxPageItemsCount, searchInput, true)\n        return\n    }\n  }, [currentPage, searchInput, pathName, fetchUsersThunk])\n\n  return (\n    <>\n      <ErrorPopUp titlesArray={[toggleFollowOnUserError, fetchUsersError]}/>\n      <PeoplePage\n        pathName={pathName}\n        searchInput={searchInput}\n        currentPage={currentPage}\n        maxPageItemsCount={maxPageItemsCount}\n        isUsersFetching={isUsersFetching}\n        totalUsersCount={totalUsersCount}\n        usersList={usersList}\n        isSubscribePending={isSubscribePending}\n        navigate={navigate}\n        setSearchInput={setSearchInput}\n        toggleFollowOnUser={toggleFollowOnUserThunk}\n        createDialogThunk={createDialogThunk}\n        setCurrentPage={setCurrentUsersPage}\n      />\n    </>\n  )\n}\n\n/* ------------- Container ------------- */\nconst mapStateToProps = (state: RootState) => {\n  return {\n    usersList: state.users.users,\n    currentPage: state.users.currentUsersPage,\n    totalUsersCount: state.users.totalUsersCount,\n    isUsersFetching: state.users.requests.fetchUsersPending,\n    isSubscribePending: state.users.requests.toggleFollowOnUserPending,\n    toggleFollowOnUserError: state.users.requests.toggleFollowOnUserError,\n    fetchUsersError: state.users.requests.fetchUsersError, \n  }\n} \n\nconst mapDispatchToProps = {\n  clearUsersState,\n  setCurrentUsersPage,\n  fetchUsersThunk,\n  toggleFollowOnUserThunk,\n  createDialogThunk,\n}\n\nconst connector = connect(mapStateToProps, mapDispatchToProps)\nexport type PeoplePageContainerProps = ConnectedProps<typeof connector>\n\nexport default compose<any>(connector, withRoute)(PeoplePageContainerApi)"],"names":["totalUsersCount","currentPage","maxPageItemsCount","usersList","searchInput","navigate","pathName","isUsersFetching","isSubscribePending","toggleFollowOnUser","setCurrentPage","setSearchInput","createDialogThunk","observedElement","useRef","observer","path","useEffect","current","disconnect","IntersectionObserver","entries","isIntersecting","getPagesAmount","observe","className","cl","TabsRowBlock","firstTabName","secondTabName","totalCount","callBack","placeholder","type","value","onChange","e","target","context","Preloader","width","height","position","ref","PeopleNav","to","isActiveNavLink","end","mapDispatchToProps","clearUsersState","setCurrentUsersPage","fetchUsersThunk","toggleFollowOnUserThunk","connector","connect","state","users","currentUsersPage","requests","fetchUsersPending","toggleFollowOnUserPending","toggleFollowOnUserError","fetchUsersError","compose","withRoute","route","location","pathname","useState","memorizedPath","window","scrollTo","ErrorPopUp","titlesArray"],"sourceRoot":""}