"use strict";(self.webpackChunkreact_samurai_way=self.webpackChunkreact_samurai_way||[]).push([[669],{6669:function(e,s,r){r.r(s),r.d(s,{default:function(){return L}});var t=r(9439),n=r(2791),o=r(5861),a=r(7757),u=r.n(a),c=r(4461),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return c.Z.get("users?page=".concat(e,"&count=").concat(s,"&term=").concat(r).concat(null!==t?"&friend=".concat(t):""))},i=function(e){return c.Z.post("follow/".concat(e))},d=function(e){return c.Z.delete("follow/".concat(e))},p=r(9231),g=function(){return{type:p.Q.FETCH_USERS_REQUEST}},h=function(e){return{type:p.Q.FETCH_USERS_SUCCESS,payload:e}},v=function(e){return{type:p.Q.FETCH_USERS_FAILURE,payload:e}},_=function(e){return{type:p.Q.TOGGLE_FOLLOW_ON_USER_SUCCESS,payload:e}},f=function(e){return{type:p.Q.TOGGLE_FOLLOW_ON_USER_FAILURE,payload:e}},m=function(e){return{type:p.Q.SET_TOTAL_USERS_COUNT,payload:e}},U=r(364),x=r(7781),S=r(3504),C=r(6871),E=r(6516),P=r(7968),I=r(9753),w={usersIFollowSection:"People_usersIFollowSection__39ZG3",usersSection:"People_usersSection__VskVb",usersTabs:"People_usersTabs__VsuMq",tabItem:"People_tabItem__isqtH",active:"People_active__D2Ugv",totalCount:"People_totalCount__C0pGJ",tabsRow:"People_tabsRow__AIi67",searchInput:"People_searchInput__8Hyyr",usersList:"People_usersList__6b4jx",usersNav:"People_usersNav__tx1sz",usersNavItem:"People_usersNavItem__CUz1A"},N=r(184),b=function(e){var s=e.totalUsersCount,r=e.isUsersFetching,t=e.currentPage,o=e.maxPageItemsCount,a=e.usersList,u=e.isSubscribePending,c=e.searchInput,l=e.toggleFollowOnUser,i=e.setCurrentPage,d=e.setSearchInput,p=e.navigate,g=(0,n.useRef)(null),h=(0,n.useRef)(null);return(0,n.useEffect)((function(){r||(h.current&&h.current.disconnect(),h.current=new IntersectionObserver((function(e){e[0].isIntersecting&&t<(0,I.vY)(s,o)&&i(t+1)})),h.current.observe(g.current))}),[r,t,o,i,s]),(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("section",{className:w.usersIFollowSection,children:[(0,N.jsxs)("section",{className:w.usersSection,children:[(0,N.jsxs)("div",{className:w.usersTabs,children:[(0,N.jsxs)("div",{className:w.tabsRow,children:[(0,N.jsxs)("div",{className:"".concat(w.tabItem," ").concat(w.active),children:[(0,N.jsx)("span",{children:"All developers "}),(0,N.jsx)("span",{className:w.totalCount,children:s})]}),(0,N.jsx)("div",{className:w.tabItem,children:"Developers online"})]}),(0,N.jsx)("div",{className:w.buttonContainer,children:(0,N.jsx)(E.Z,{callBack:function(){return p("people")},children:"Find developers"})})]}),(0,N.jsx)("input",{placeholder:"Search users I follow",className:w.searchInput,type:"text",value:c,onChange:function(e){return d(e.target.value)}}),(0,N.jsx)("div",{className:w.usersList,children:(0,N.jsx)(C.j3,{context:{usersList:a,isSubscribePending:u,toggleFollowOnUser:l}})}),r?(0,N.jsx)(P.Z,{width:"50px",height:"50px",position:"absolute"}):(0,N.jsx)("div",{ref:g})]}),(0,N.jsxs)("nav",{className:w.usersNav,children:[(0,N.jsx)(S.OL,{to:"developersIFollow",className:(0,I.Xz)(w.usersNavItem,w.active),children:"People I follow"}),(0,N.jsx)(S.OL,{to:"/people",end:!0,className:(0,I.Xz)(w.usersNavItem,w.active),children:"Find Developers"}),(0,N.jsx)("div",{className:w.usersNavItem,children:"Placeholder"}),(0,N.jsx)("div",{className:w.usersNavItem,children:"Placeholder"}),(0,N.jsx)("div",{className:w.usersNavItem,children:"Placeholder"})]})]})})},F=r(4384),j=r(3858),O={clearUsersState:function(){return{type:p.Q.CLEAR_USERS_STATE}},fetchUsersThunk:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(){var t=(0,o.Z)(u().mark((function t(n,o){var a,c,i,d;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(g()),a=o(),c=a.users.maxPageItemsCount,t.next=5,l(e,c,s,r);case 5:i=t.sent,(d=i.data).error?n(v(d.error)):(n(m(d.totalCount)),n(h(d.items))),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0),n(v("An error occurred during fetching developers"));case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,s){return t.apply(this,arguments)}}()},setCurrentUsersPage:function(e){return{type:p.Q.SET_CURRENT_USERS_PAGE,payload:e}},toggleFollowOnUserThunk:function(e,s){return function(){var r=(0,o.Z)(u().mark((function r(t){var n,o,a;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t((u=e,{type:p.Q.TOGGLE_FOLLOW_ON_USER_REQUEST,payload:u})),n=s?d:i,r.next=5,n(e);case 5:o=r.sent,0===(a=o.data).resultCode?t(_(e)):1===a.resultCode&&t(f({error:a.messages[0],id:e})),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(0),console.log(r.t0),t(f({error:"An error occurred during follow/unfollow on user",id:e}));case 14:case"end":return r.stop()}var u}),r,null,[[0,10]])})));return function(e){return r.apply(this,arguments)}}()}},y=(0,U.$j)((function(e){return{toggleFollowOnUserError:e.users.requests.toggleFollowOnUserError,fetchUsersError:e.users.requests.fetchUsersError,usersList:e.users.users,currentPage:e.users.currentUsersPage,maxPageItemsCount:e.users.maxPageItemsCount,totalUsersCount:e.users.totalUsersCount,isUsersFetching:e.users.requests.fetchUsersPending,isSubscribePending:e.users.requests.toggleFollowOnUserPending}}),O),L=(0,x.qC)(y,F.l)((function(e){var s=e.fetchUsersThunk,r=e.clearUsersState,o=e.currentPage,a=e.route,u=e.isSubscribePending,c=e.isUsersFetching,l=e.maxPageItemsCount,i=e.setCurrentUsersPage,d=e.toggleFollowOnUserThunk,p=e.totalUsersCount,g=e.usersList,h=e.toggleFollowOnUserError,v=e.fetchUsersError,_=a.location.pathname,f=a.navigate,m=(0,n.useState)(""),U=(0,t.Z)(m,2),x=U[0],S=U[1];return(0,n.useEffect)((function(){r()}),[_,x,r]),(0,n.useEffect)((function(){switch(_){case"/people":return void s(o,x);case"/people/developersIFollow":return void s(o,x,!0)}}),[o,x,_,s]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(j.W,{titlesArray:[h,v]}),(0,N.jsx)(b,{searchInput:x,currentPage:o,maxPageItemsCount:l,isUsersFetching:c,totalUsersCount:p,usersList:g,isSubscribePending:u,navigate:f,setSearchInput:S,toggleFollowOnUser:d,setCurrentPage:i})]})}))}}]);
//# sourceMappingURL=669.c48c987f.chunk.js.map